<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escanear Código de Barras</title>
    <style>
        #videoElement {
            width: 100%;
            height: 400px;
            border: 1px solid black;
            background-color: black;
        }
    </style>
</head>
<body>
    <h1>Escanear Código de Barras con QuaggaJS</h1>

    <video id="videoElement" autoplay></video>
    <p>Escaneado: <span id="result">Ningún código escaneado</span></p>

    <!-- Cargar QuaggaJS desde el CDN -->
    <script src="https://cdn.jsdelivr.net/npm/quagga@0.12.1/dist/quagga.min.js"></script>

    <script>
        // Iniciar la cámara y escanear códigos de barras
        function iniciarCamara() {
            const videoElement = document.getElementById('videoElement');
            const resultElement = document.getElementById('result');

            // Configuración de QuaggaJS
            Quagga.init({
                inputStream: {
                    name: "Live",
                    type: "LiveStream",
                    target: videoElement, // asignar el video element para mostrar la cámara
                    constraints: {
                        facingMode: "environment" // cámara trasera en dispositivos móviles
                    }
                },
                decoder: {
                    readers: ["code_128_reader", "ean_reader", "ean_8_reader", "upc_reader"] // lectores de diferentes códigos de barras
                }
            }, function(err) {
                if (err) {
                    console.error(err);
                    alert('Error al iniciar el escáner: ' + err);
                    return;
                }
                console.log("Escáner iniciado");
                Quagga.start(); // Comienza a escanear

                // Detectar el código escaneado
                Quagga.onDetected(function(data) {
                    console.log(data);
                    resultElement.textContent = `Código escaneado: ${data.codeResult.code}`;
                });
            });
        }

        window.onload = function() {
            iniciarCamara();
        };
    </script>
</body>
</html>



